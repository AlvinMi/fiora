<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>INSTALL.ZH · Fiora</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# 安装教程"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="INSTALL.ZH · Fiora"/><meta property="og:type" content="website"/><meta property="og:url" content="https://fiora.suisuijiang.com/"/><meta property="og:description" content="# 安装教程"/><meta property="og:image" content="https://fiora.suisuijiang.com/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://fiora.suisuijiang.com/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/favicon.ico" alt="Fiora"/><h2 class="headerTitleWithLogo">Fiora</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/INSTALL" target="_self">Docs</a></li><li class=""><a href="/docs/en/API-DOC" target="_self">API</a></li><li class=""><a href="/en/help" target="_self">Help</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/zh-Hans/INSTALL.ZH"> 简体中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/yinxin630/fiora" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">INSTALL.ZH</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="安装教程"></a><a href="#安装教程" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>安装教程</h1>
<h2><a class="anchor" aria-hidden="true" id="环境准备"></a><a href="#环境准备" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>环境准备</h2>
<p>要运行 Fiora, 你需要 Node.js(推荐 v14 LTS版本), MongoDB 和 redis</p>
<ul>
<li>安装 Node.js
<ul>
<li>官网 <a href="http://nodejs.cn/download/">http://nodejs.cn/download/</a></li>
<li>更推荐使用 nvm 安装 Node.js
<ul>
<li>安装 nvm <a href="https://github.com/nvm-sh/nvm#install--update-script">https://github.com/nvm-sh/nvm#install--update-script</a></li>
<li>通过 nvm 安装 Node.js <a href="https://github.com/nvm-sh/nvm#usage">https://github.com/nvm-sh/nvm#usage</a></li>
</ul></li>
</ul></li>
<li>安装 MongoDB
<ul>
<li>官网 <a href="https://docs.mongodb.com/manual/installation/#install-mongodb">https://docs.mongodb.com/manual/installation/#install-mongodb</a></li>
</ul></li>
<li>安装 redis
<ul>
<li>官网 <a href="https://redis.io/topics/quickstart">https://redis.io/topics/quickstart</a></li>
</ul></li>
</ul>
<p>推荐在 Linux 或者 MacOS 系统上运行</p>
<h2><a class="anchor" aria-hidden="true" id="如何运行"></a><a href="#如何运行" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>如何运行</h2>
<ol>
<li>克隆项目到本地 <code>git clone https://github.com/yinxin630/fiora.git -b master</code></li>
<li>确保安装了 <a href="https://www.npmjs.com/package/yarn">yarn</a>, 如果没有安装请执行 <code>npm install -g yarn</code></li>
<li>安装项目依赖 <code>yarn install</code></li>
<li>构建客户端代码 <code>yarn build:client &amp;&amp; yarn move-dist</code></li>
<li>启动服务端 <code>yarn start</code></li>
<li>使用浏览器打开 <code>http://[ip地址]:[端口]</code>(比如 <code>http://127.0.0.1:9200</code>)</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="在后台运行"></a><a href="#在后台运行" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>在后台运行</h3>
<p>使用 <code>yarn start</code> 运行服务端会在断开 ssh 连接后停止运行, 推荐使用 pm2 来运行</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># 安装 pm2</span>
npm install -g pm2

<span class="hljs-comment"># 使用 pm2 运行 fiora</span>
pm2 start yarn --name fiora -- start

<span class="hljs-comment"># 查看 pm2 应用状态</span>
pm2 ls

<span class="hljs-comment"># 查看 pm2 fiora 日志</span>
pm2 logs fiora
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="运行开发模式"></a><a href="#运行开发模式" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运行开发模式</h3>
<ol>
<li>启动服务端 <code>yarn dev:server</code></li>
<li>启动客户端 <code>yarn dev:client</code></li>
<li>使用浏览器打开 <code>http://localhost:8080</code></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="docker运行"></a><a href="#docker运行" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>docker运行</h3>
<p>首先安装docker <a href="https://docs.docker.com/install/">https://docs.docker.com/install/</a></p>
<h4><a class="anchor" aria-hidden="true" id="直接从-dockerhub-镜像运行"></a><a href="#直接从-dockerhub-镜像运行" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>直接从 DockerHub 镜像运行</h4>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># 拉取 mongo</span>
docker pull mongo

<span class="hljs-comment"># 拉取 redis</span>
docker pull redis

<span class="hljs-comment"># 拉取 fiora</span>
docker pull suisuijiang/fiora

<span class="hljs-comment"># 创建虚拟网络</span>
docker network create fiora-network

<span class="hljs-comment"># 启动 mongodB</span>
docker run --name fioradb -p 27017:27017 --network fiora-network mongo

<span class="hljs-comment"># 启动 redis</span>
docker run --name fioraredis -p 6379:6379 --network fiora-network redis

<span class="hljs-comment"># 启动 fiora</span>
docker run --name fiora -p 9200:9200 --network fiora-network -e Database=mongodb://fioradb:27017/fiora -e RedisHost=fioraredis suisuijiang/fiora
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="本地构建镜像运行"></a><a href="#本地构建镜像运行" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>本地构建镜像运行</h4>
<ol>
<li>克隆项目到本地 <code>git clone https://github.com/yinxin630/fiora.git -b master</code></li>
<li>构建镜像 <code>docker-compose build --no-cache --force-rm</code></li>
<li>运行 <code>docker-compose up</code></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="项目配置"></a><a href="#项目配置" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>项目配置</h2>
<ul>
<li>服务器配置 <code>config/server.ts</code></li>
<li>客户端配置 <code>config/client.ts</code></li>
</ul>
<p>在 fiora 根目录创建 <code>.env</code> 文件, 在里面填写 <code>key=value</code> 键值对(每行一个), 即可修改配置. 比如修改端口号 <code>Port=8888</code></p>
<p><strong>服务端配置</strong></p>
<table>
<thead>
<tr><th>Key</th><th>类型</th><th>默认值</th><th>描述</th></tr>
</thead>
<tbody>
<tr><td>Host</td><td>string</td><td>your ip</td><td>服务端 host</td></tr>
<tr><td>Port</td><td>number</td><td>9200</td><td>服务端端口号</td></tr>
<tr><td>Database</td><td>string</td><td><a href="mongodb://localhost:27017/fiora">mongodb://localhost:27017/fiora</a></td><td>mongoDB 数据库地址</td></tr>
<tr><td>JwtSecret</td><td>string</td><td>jwtSecret (推荐修改它来保证安全性)</td><td>jwt token 加密 secret</td></tr>
<tr><td>MaxGroupCount</td><td>number</td><td>3</td><td>用户最大可以创建的群组个数</td></tr>
<tr><td>QiniuAccessKey</td><td>string</td><td>''</td><td>七牛CDN access key. 如果为空, 则文件长传到服务端</td></tr>
<tr><td>QiniuSecretKey</td><td>string</td><td>''</td><td>七牛CDN secret key</td></tr>
<tr><td>QiniuBucket</td><td>string</td><td>''</td><td>七牛CDN bucket 名</td></tr>
<tr><td>QiniuUrlPrefix</td><td>string</td><td>''</td><td>七牛CDN bucket url 前缀, 以 / 结尾, 例如 <a href="https://cdn.suisuijiang.com/">https://cdn.suisuijiang.com/</a></td></tr>
<tr><td>AllowOrigin</td><td>string</td><td>null</td><td>允许的客户端 origin 列表, null 时允许所有 origin 连接, 多个值逗号分割</td></tr>
<tr><td>tokenExpiresTime</td><td>number</td><td>2592000000 (30天)</td><td>登陆 token 过期时间</td></tr>
<tr><td>Administrator</td><td>string</td><td>''</td><td>管理员用户 id 列表, 多个值逗号分割</td></tr>
<tr><td>DefaultGroupName</td><td>string</td><td>fiora</td><td>默认群组名</td></tr>
<tr><td>DisableRegister</td><td>boolean</td><td>false</td><td>禁止注册账号</td></tr>
<tr><td>DisableCreateGroup</td><td>boolean</td><td>false</td><td>禁止创建群组</td></tr>
</tbody>
</table>
<p><strong>客户端配置</strong></p>
<table>
<thead>
<tr><th>Key</th><th>类型</th><th>默认值</th><th>描述</th></tr>
</thead>
<tbody>
<tr><td>Server</td><td>string</td><td>/</td><td>客户端要连接的服务端地址</td></tr>
<tr><td>MaxImageSize</td><td>number</td><td>3145728 (3MB)</td><td>客户端可以上传的最大图片大小</td></tr>
<tr><td>MaxBackgroundImageSize</td><td>number</td><td>5242880 (5MB)</td><td>客户端可以上传的最大背景图大小</td></tr>
<tr><td>MaxAvatarSize</td><td>number</td><td>1572864 (1.5MB)</td><td>客户端可以上传的最大头像图片大小</td></tr>
<tr><td>MaxFileSize</td><td>number</td><td>10485760 (10MB)</td><td>客户端可以上传的最大文件大小</td></tr>
<tr><td>DefaultTheme</td><td>string</td><td>cool</td><td>默认主题</td></tr>
<tr><td>Sound</td><td>string</td><td>default</td><td>默认通知音</td></tr>
<tr><td>TagColorMode</td><td>string</td><td>fixedColor</td><td>默认标签颜色模式</td></tr>
<tr><td>FrontendMonitorAppId</td><td>string</td><td>fixedColor</td><td>岳鹰监控 appId <a href="https://yueying.effirst.com/index">https://yueying.effirst.com/index</a></td></tr>
<tr><td>DisableDeleteMessage</td><td>boolean</td><td>false</td><td>禁止用户撤回消息</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="faq"></a><a href="#faq" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FAQ</h2>
<h3><a class="anchor" aria-hidden="true" id="设置管理员"></a><a href="#设置管理员" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设置管理员</h3>
<ol>
<li>获取用户id, 执行 <code>yarn script getUserId [username]</code></li>
<li>修改 <code>Administrator</code> 配置项, 改为上一步获取的id</li>
<li>重启服务器</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="修改默认群组名称"></a><a href="#修改默认群组名称" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>修改默认群组名称</h3>
<ol>
<li>修改 <code>DefaultGroupName</code> 配置项</li>
<li>重启服务器</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="自定义域名-通过nginx反向代理"></a><a href="#自定义域名-通过nginx反向代理" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自定义域名, 通过nginx反向代理</h3>
<p><strong>请修改注释项的配置</strong></p>
<p>示例配置</p>
<pre><code class="hljs"><span class="hljs-section">server</span> {
   <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;
   <span class="hljs-comment"># 修改为你的域名</span>
   <span class="hljs-attribute">server_name</span> fiora.suisuijiang.com;

   <span class="hljs-attribute">location</span> / {
      <span class="hljs-attribute">proxy_set_header</span>   X-Real-IP        <span class="hljs-variable">$remote_addr</span>;
      <span class="hljs-attribute">proxy_set_header</span>   X-Forwarded-For  <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
      <span class="hljs-attribute">proxy_set_header</span>   Host             <span class="hljs-variable">$http_host</span>;
      <span class="hljs-attribute">proxy_set_header</span>   Upgrade          <span class="hljs-variable">$http_upgrade</span>;
      <span class="hljs-attribute">proxy_set_header</span>   X-NginX-Proxy    <span class="hljs-literal">true</span>;
      <span class="hljs-attribute">proxy_set_header</span>   Connection <span class="hljs-string">"upgrade"</span>;
      <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;
      <span class="hljs-attribute">proxy_pass</span>         http://localhost:9200;
   }
}
</code></pre>
<p>配置 HTTPS + HTTP 2.0</p>
<pre><code class="hljs"><span class="hljs-section">server</span> {
   <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;
   <span class="hljs-comment"># 修改为你的域名</span>
   <span class="hljs-attribute">server_name</span> fiora.suisuijiang.com;
   <span class="hljs-attribute">return</span> <span class="hljs-number">301</span> https://fiora.suisuijiang.com<span class="hljs-variable">$request_uri</span>;
}
<span class="hljs-section">server</span> {
   <span class="hljs-attribute">listen</span> <span class="hljs-number">443</span> ssl http2;
   <span class="hljs-comment"># 修改为你的域名</span>
   <span class="hljs-attribute">server_name</span>  fiora.suisuijiang.com;

   <span class="hljs-attribute">ssl</span> <span class="hljs-literal">on</span>;
   <span class="hljs-comment"># 修改为你的ssl证书位置</span>
   <span class="hljs-attribute">ssl_certificate</span> ./ssl/fiora.suisuijiang.com.crt;
   <span class="hljs-attribute">ssl_certificate_key</span> ./ssl/fiora.suisuijiang.com.key;
   <span class="hljs-attribute">ssl_session_timeout</span> <span class="hljs-number">5m</span>;
   <span class="hljs-attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="hljs-number">1</span> TLSv1.<span class="hljs-number">2</span>;
   <span class="hljs-attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
   <span class="hljs-attribute">ssl_prefer_server_ciphers</span> <span class="hljs-literal">on</span>;

   <span class="hljs-attribute">location</span> / {
      <span class="hljs-attribute">proxy_set_header</span>   X-Real-IP        <span class="hljs-variable">$remote_addr</span>;
      <span class="hljs-attribute">proxy_set_header</span>   X-Forwarded-For  <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
      <span class="hljs-attribute">proxy_set_header</span>   Host             <span class="hljs-variable">$http_host</span>;
      <span class="hljs-attribute">proxy_set_header</span>   Upgrade          <span class="hljs-variable">$http_upgrade</span>;
      <span class="hljs-attribute">proxy_set_header</span>   X-NginX-Proxy    <span class="hljs-literal">true</span>;
      <span class="hljs-attribute">proxy_set_header</span>   Connection <span class="hljs-string">"upgrade"</span>;
      <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;
      <span class="hljs-attribute">proxy_pass</span>         http://localhost:9200;
   }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="禁止注册-手动分配账号"></a><a href="#禁止注册-手动分配账号" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>禁止注册, 手动分配账号</h3>
<p>将 <code>DisableRegister</code> 配置项设置为 true, 重启服务器生效</p>
<p>执行 <code>yarn script register [username] [password]</code> 手动注册新用户</p>
<h3><a class="anchor" aria-hidden="true" id="删除用户"></a><a href="#删除用户" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除用户</h3>
<p>执行 <code>yarn script deleteUser [userId]</code></p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#环境准备">环境准备</a></li><li><a href="#如何运行">如何运行</a><ul class="toc-headings"><li><a href="#在后台运行">在后台运行</a></li><li><a href="#运行开发模式">运行开发模式</a></li><li><a href="#docker运行">docker运行</a></li></ul></li><li><a href="#项目配置">项目配置</a></li><li><a href="#faq">FAQ</a><ul class="toc-headings"><li><a href="#设置管理员">设置管理员</a></li><li><a href="#修改默认群组名称">修改默认群组名称</a></li><li><a href="#自定义域名-通过nginx反向代理">自定义域名, 通过nginx反向代理</a></li><li><a href="#禁止注册-手动分配账号">禁止注册, 手动分配账号</a></li><li><a href="#删除用户">删除用户</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/favicon.ico" alt="Fiora" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/doc1.html">Getting Started (or other categories)</a><a href="/docs/doc2.html">Guides (or other categories)</a><a href="/docs/API-DOC.md">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/users">User Showcase</a><a href="https://fiora.suisuijiang.com/">Project Chat</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/yinxin630/fiora">GitHub</a><a class="github-button" href="https://github.com/yinxin630/fiora" data-icon="octicon-star" data-count-href="/yinxin630/fiora/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2021 Your Name or Your Company Name</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'undefined',
                indexName: 'fiora',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:en","version:undefined"]}
              });
            </script></body></html>